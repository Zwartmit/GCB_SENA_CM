<nav class="navbar navbar-expand-lg navbar-light border-bottom" style="background-color: #034231;">
    <div class="container-fluid position-relative">
        <button class="btn text-white d-lg-none" id="sidebarToggle">
            <i class="fas fa-bars"></i>
        </button>
        
        <h4 id="panelTitle" class="position-absolute start-50 translate-middle-x my-0 text-white">
            Panel de administración
        </h4>

        <div class="dropdown ms-auto">
            <button class="btn btn-light dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-user-circle me-1"></i>
                
                <span class="d-none d-lg-inline">
                    {{ user.first_name }} {{ user.last_name }}
                </span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                <li>
                    <a class="dropdown-item" href="{% url 'dashboard:profile' %}">
                        <i class="fas fa-user-cog me-2"></i> Perfil
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
                <li>
                    <a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">
                        <i class="fas fa-sign-out-alt me-2"></i> Cerrar sesión
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logoutModalLabel">¿Deseas cerrar sesión ?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <form method="post" action="{% url 'accounts:logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">Cerrar sesión</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const sidebarToggle = document.getElementById('sidebarToggle');
    const panelTitle = document.getElementById('panelTitle');
    
    sidebarToggle.addEventListener('click', function () {
        if (document.body.classList.contains('sidebar-open')) {
            panelTitle.style.display = 'block';
        } else {
            panelTitle.style.display = 'none';
        }
    });
</script>
